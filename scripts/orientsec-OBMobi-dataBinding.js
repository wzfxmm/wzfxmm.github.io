var Bind=function a(b){"use strict";function c(a){return(a+"").replace(/[<>]/g,function(a){return{">":"&gt;","<":"&lt;"}[a]})}function d(a,b){for(var c=a.length,d=0;c>d;d++)b(a[d],d,a)}function e(a,b){var c="pop push reverse shift sort splice unshift".split(" ");d(c,function(c){this[c]=function(){this.__dirty=!0;var d=g({},i[c].apply(this,arguments));return delete this.__dirty,a&&b.ready&&a(this),d}.bind(this)}.bind(this));var e=this.length;return Object.defineProperty(this,"length",{configurable:!1,enumerable:!0,set:function(a){if(!this.__dirty){var b=1*a;return e!==b&&(b>e?this.push.apply(this,new Array(b-e)):this.splice(b),e=b),a}e=a},get:function(){return e}}),this}function f(i,n,o,p){if(p||(p=[]),o.ready&&n.__callback)return i;if(n instanceof a)return n;var q;try{var r=o.context||document;q=r.querySelectorAll.bind(r)}catch(a){}return d(Object.getOwnPropertyNames(n),function(a){if("__callback"!==a){var r,s=n[a],t=[].slice.call(p),u=function(a){return c(a)},v=l;t.push(a);var w=o.mapping[t.join(".")];h&&console.log("key: %s / %s",a,t.join("."),w),w&&"[object Object]"===w.toString()&&(w.callback&&(r=w.callback),w.transform&&(u=m(w.transform.bind({safe:c}))),w.parse&&(v=m(w.parse)),w=w.dom);var x;if("string"==typeof w?x=q(w||"☺"):b.Element&&w instanceof b.Element&&(x=[w]),"function"==typeof w)r=w;else if(x){0===x.length&&console.warn('No elements found against "'+w+'" selector');var y=["OPTION","INPUT","PROGRESS","TEXTAREA"];(null===s||void 0===s)&&(s=v(-1!==y.indexOf(x[0].nodeName)?x[0].hasOwnProperty("checked")&&"on"===x[0].value?x[0].checked:x[0].value:x[0].innerHTML));var z=r;r=function(a){x=q(w||"☺"),x&&d(x,function(b){if(!b.__dirty)if(-1!==y.indexOf(b.nodeName)){var c=u(a,i);if("checkbox"===b.type)if(a instanceof Array){var e=a.filter(function(a){if(a===b.value)return b.checked=b.value===a,!0});0===e.length&&(b.checked=!1)}else"boolean"==typeof a&&(b.checked=a);else if("radio"===b.type)b.checked=b.value===c;else if("number"==typeof b.value)try{b.value=1*c}catch(a){console.error(a.message)}else b.value=c}else{a instanceof Array||(a=[a]);var f=[];d(a,function(a){f.push(u(a,i))}),"object"==typeof f[0]?(b.innerHTML="",f.forEach(function(a){b.appendChild(a)})):b.innerHTML=f.join("")}}),z&&z.apply(i,arguments)},d(x,function(b){if("INPUT"===b.nodeName||"SELECT"===b.nodeName||"TEXTAREA"===b.nodeName){var c=function(){this.__dirty=!0;var c;if("checkbox"===b.type){var e=(b.form||document).querySelectorAll('input[name="'+b.name+'"][type="checkbox"]');if(i[a]instanceof Array){var f=[];d(e,function(a){a.checked&&f.push(v("on"===a.value?a.checked:a.value))}),c=f}else c=v("on"===this.value?this.checked:this.value)}else"radio"===b.type&&(c=v("on"===this.value?this.checked:this.value)),c=v("number"==typeof i[a]?1*this.value:this.value);void 0===c&&(c=this.value),i[a]=c,this.__dirty=!1},e={checkbox:"change",radio:"change"}[b.type];b.addEventListener(e||"input",c)}})}r&&t.reduce(function(a,b,c,d){return a[b]||(a[b]={}),c===d.length-1&&(a[b].__callback=r),a[b]},o.callbacks);var A=function(b){var c=[],d=[],e=o.instance,f=!1,i=!1;h&&console.log("> finding callback for %s",a,t),t.reduce(function(a,h,j){if(a&&a[h]&&h){if(e=e[h],null===e||void 0===e)return a[h]||{};if("function"==typeof a[h].__callback){var k=j===t.length-1?b:e;e.__dirty&&(f=!0),j===t.length-1&&a[h].__callback&&(i={path:t.join("."),callback:a[h].__callback,instance:k}),f||(d.push(g(k instanceof Array?[]:{},k)),c.push(a[h].__callback))}return a[h]||{}}},o.callbacks),f||(d.reverse(),c.reverse().forEach(function(a,b){a.call(o.instance,d[b])})),f&&i&&(e=i.instance,i.callback.call(o.instance,g(e instanceof Array?[]:{},e)))},B={configurable:!0,enumerable:!0,set:function(b){var c=s!==b?s:void 0;s=!o.ready||typeof b!==k||null===b||j(b)||b.__callback?j(b)?f(new e(A,o),b,o,t):b:f(i[a]?g({},i[a]):{},b,o,t),h&&console.log("set: key(%s): %s -> %s",a,JSON.stringify(c),JSON.stringify(b)),o.ready?A(s):"undefined"!=typeof o.mapping[t.join(".")]&&o.deferred.push(A.bind(i,s,c))},get:function(){return s}};try{Object.defineProperty(i,a,B)}catch(a){h&&console.log("failed on Object.defineProperty",a.toString(),a.stack)}typeof s!==k||null===s||j(s)?j(s)?i[a]=f(new e(A,o),s,o,t):i instanceof e||(i[a]=s):i[a]=f(i[a]||{},s,o,t)}}),i instanceof e&&i.push.apply(i,n),i}function g(b,c){return c instanceof Object?(d(Object.getOwnPropertyNames(c),function(d){var e=c[d];a.prototype[d]||"__callback"===d||(typeof e===k&&null!==e&&e instanceof Array?b[d]=[].map.call(e,function(a){return a instanceof Object?g(b[d]||{},a):a}):typeof e!==k||null===e||j(e)||"[Object object]"!==e.toString?b[d]=e:b[d]=g(b[d]||{},e))}),b):c}function a(c,e,g){if(!this||this===b)return new a(c,e);var h={context:g||b.document,mapping:e||{},callbacks:{},deferred:[],ready:!1,instance:this};return f(this,c,h),h.ready=!0,h.deferred.length&&d(h.deferred,function(a){a()}),this}if(!Function.bind||!Object.defineProperty)throw new Error("Prerequisite APIs not available.");var h=!1,i=[],j=Array.isArray,k="object",l=function(a){return a},m=function(a){return function(){try{return a.apply(this,arguments)}catch(a){console.error(a.stack?a.stack:a)}}};return e.prototype=[],a.prototype.__export=function(){return g({},this)},a}(this);"undefined"!=typeof exports&&(module.exports=Bind),define("Bind",function(a){return function(){var b;return b||a.Bind}}(this)),!function(a){"use strict";a("dataBinding",["Bind"],function(a){return function(b,c){return new a(b,c)}})}("function"==typeof define&&define.amd?define:function(a){module.exports=a(require)});